(function(){var scriptName="ExtendedPopupBehavior";function execute(){var e="click",d=false,c=null;Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.PopupControlBehavior=function(b){var a=this;Sys.Extended.UI.PopupControlBehavior.initializeBase(a,[b]);a._popupControlID=c;a._commitProperty=c;a._commitScript=c;a._position=c;a._offsetX=0;a._offsetY=0;a._extenderControlID=c;a._popupElement=c;a._popupBehavior=c;a._popupVisible=d;a._focusHandler=c;a._popupKeyDownHandler=c;a._popupClickHandler=c;a._bodyClickHandler=c;a._onShowJson=c;a._onHideJson=c};Sys.Extended.UI.PopupControlBehavior.prototype={initialize:function(){var a=this;Sys.Extended.UI.PopupControlBehavior.callBaseMethod(a,"initialize");var b=a.get_element();a._popupElement=$get(a._popupControlID);a._popupBehavior=$create(Sys.Extended.UI.PopupBehavior,{id:a.get_id()+"PopupBehavior",parentElement:b},c,c,a._popupElement);a._onShowJson&&a._popupBehavior.set_onShow(a._onShowJson);a._onHideJson&&a._popupBehavior.set_onHide(a._onHideJson);a._focusHandler=Function.createDelegate(a,a._onFocus);a._popupClickHandler=Function.createDelegate(a,a._onPopupClick);a._bodyClickHandler=Function.createDelegate(a,a._onBodyClick);a._popupKeyDownHandler=Function.createDelegate(a,a._onPopupKeyDown);$addHandler(b,"focus",a._focusHandler);$addHandler(b,e,a._focusHandler);$addHandler(document.body,e,a._bodyClickHandler);$addHandler(a._popupElement,e,a._popupClickHandler);$addHandler(a._popupElement,"keydown",a._popupKeyDownHandler);a.registerPartialUpdateEvents();Sys.Extended.UI.PopupControlBehavior.__VisiblePopup&&a.get_id()==Sys.Extended.UI.PopupControlBehavior.__VisiblePopup.get_id()&&a._onFocus(c)},dispose:function(){var a=this,b=a.get_element();a._onShowJson=c;a._onHideJson=c;if(a._popupBehavior){a._popupBehavior.dispose();a._popupBehavior=c}if(a._focusHandler){$removeHandler(b,"focus",a._focusHandler);$removeHandler(b,e,a._focusHandler);a._focusHandler=c}if(a._bodyClickHandler){$removeHandler(document.body,e,a._bodyClickHandler);a._bodyClickHandler=c}if(a._popupClickHandler){$removeHandler(a._popupElement,e,a._popupClickHandler);a._popupClickHandler=c}if(a._popupKeyDownHandler){$removeHandler(a._popupElement,"keydown",a._popupKeyDownHandler);a._popupKeyDownHandler=c}Sys.Extended.UI.PopupControlBehavior.callBaseMethod(a,"dispose")},showPopup:function(){var a=this,b=Sys.Extended.UI.PopupControlBehavior.__VisiblePopup;b&&b._popupBehavior&&b.hidePopup();Sys.Extended.UI.PopupControlBehavior.callBaseMethod(a,"populate");a._popupBehavior.set_x(a._getLeftOffset());a._popupBehavior.set_y(a._getTopOffset());a._popupBehavior.show();a._popupVisible=true;Sys.Extended.UI.PopupControlBehavior.__VisiblePopup=a},hidePopup:function(){this._popupBehavior.hide();this._popupVisible=d;Sys.Extended.UI.PopupControlBehavior.__VisiblePopup=c},_onFocus:function(a){!this._popupVisible&&this.showPopup();a&&a.stopPropagation()},_onPopupKeyDown:function(a){this._popupVisible&&a.keyCode==27&&this.get_element().focus()},_onPopupClick:function(a){a.stopPropagation()},_onBodyClick:function(){this._popupVisible&&this.hidePopup()},_close:function(result){var a=this,e=a.get_element();if(c!=result){if("$$CANCEL$$"!=result){if(a._commitProperty)e[a._commitProperty]=result;else if("text"==e.type)e.value=result;else Sys.Debug.assert(d,String.format(Sys.Extended.UI.Resources.PopupControl_NoDefaultProperty,e.id,e.type));if(a._commitScript)eval(a._commitScript)}a.hidePopup()}},_partialUpdateEndRequest:function(d,c){var a=this;Sys.Extended.UI.PopupControlBehavior.callBaseMethod(a,"_partialUpdateEndRequest",[d,c]);if(a.get_element()){var b=c.get_dataItems()[a.get_element().id];if(undefined===b&&Sys.Extended.UI.PopupControlBehavior.__VisiblePopup&&a.get_id()==Sys.Extended.UI.PopupControlBehavior.__VisiblePopup.get_id())b=c.get_dataItems()["_PopupControl_Proxy_ID_"];undefined!==b&&a._close(b)}},_onPopulated:function(b,a){Sys.Extended.UI.PopupControlBehavior.callBaseMethod(this,"_onPopulated",[b,a]);this._popupVisible&&this._popupBehavior.show()},_getLeftOffset:function(){var a=this;if(Sys.Extended.UI.PopupControlPopupPosition.Left==a._position)return -1*a.get_element().offsetWidth+a._offsetX;else if(Sys.Extended.UI.PopupControlPopupPosition.Right==a._position)return a.get_element().offsetWidth+a._offsetX;else return a._offsetX},_getTopOffset:function(){var a=this,b;if(Sys.Extended.UI.PopupControlPopupPosition.Top==a._position)b=-1*a.get_element().offsetHeight+a._offsetY;else if(Sys.Extended.UI.PopupControlPopupPosition.Bottom==a._position)b=a.get_element().offsetHeight+a._offsetY;else b=a._offsetY;return b},get_onShow:function(){return this._popupBehavior?this._popupBehavior.get_onShow():this._onShowJson},set_onShow:function(b){var a=this;if(a._popupBehavior)a._popupBehavior.set_onShow(b);else a._onShowJson=b;a.raisePropertyChanged("onShow")},get_onShowBehavior:function(){return this._popupBehavior?this._popupBehavior.get_onShowBehavior():c},onShow:function(){this._popupBehavior&&this._popupBehavior.onShow()},get_onHide:function(){return this._popupBehavior?this._popupBehavior.get_onHide():this._onHideJson},set_onHide:function(b){var a=this;if(a._popupBehavior)a._popupBehavior.set_onHide(b);else a._onHideJson=b;a.raisePropertyChanged("onHide")},get_onHideBehavior:function(){return this._popupBehavior?this._popupBehavior.get_onHideBehavior():c},onHide:function(){this._popupBehavior&&this._popupBehavior.onHide()},get_PopupControlID:function(){return this._popupControlID},set_PopupControlID:function(a){if(this._popupControlID!=a){this._popupControlID=a;this.raisePropertyChanged("PopupControlID")}},get_CommitProperty:function(){return this._commitProperty},set_CommitProperty:function(a){if(this._commitProperty!=a){this._commitProperty=a;this.raisePropertyChanged("CommitProperty")}},get_CommitScript:function(){return this._commitScript},set_CommitScript:function(a){if(this._commitScript!=a){this._commitScript=a;this.raisePropertyChanged("CommitScript")}},get_Position:function(){return this._position},set_Position:function(a){if(this._position!=a){this._position=a;this.raisePropertyChanged("Position")}},get_ExtenderControlID:function(){return this._extenderControlID},set_ExtenderControlID:function(a){if(this._extenderControlID!=a){this._extenderControlID=a;this.raisePropertyChanged("ExtenderControlID")}},get_OffsetX:function(){return this._offsetX},set_OffsetX:function(a){if(this._offsetX!=a){this._offsetX=a;this.raisePropertyChanged("OffsetX")}},get_OffsetY:function(){return this._offsetY},set_OffsetY:function(a){if(this._offsetY!=a){this._offsetY=a;this.raisePropertyChanged("OffsetY")}},get_PopupVisible:function(){return this._popupVisible},add_showing:function(a){this._popupBehavior&&this._popupBehavior.add_showing(a)},remove_showing:function(a){this._popupBehavior&&this._popupBehavior.remove_showing(a)},raiseShowing:function(a){this._popupBehavior&&this._popupBehavior.raiseShowing(a)},add_shown:function(a){this._popupBehavior&&this._popupBehavior.add_shown(a)},remove_shown:function(a){this._popupBehavior&&this._popupBehavior.remove_shown(a)},raiseShown:function(a){this._popupBehavior&&this._popupBehavior.raiseShown(a)},add_hiding:function(a){this._popupBehavior&&this._popupBehavior.add_hiding(a)},remove_hiding:function(a){this._popupBehavior&&this._popupBehavior.remove_hiding(a)},raiseHiding:function(a){this._popupBehavior&&this._popupBehavior.raiseHiding(a)},add_hidden:function(a){this._popupBehavior&&this._popupBehavior.add_hidden(a)},remove_hidden:function(a){this._popupBehavior&&this._popupBehavior.remove_hidden(a)},raiseHidden:function(a){this._popupBehavior&&this._popupBehavior.raiseHidden(a)}};Sys.Extended.UI.PopupControlBehavior.registerClass("Sys.Extended.UI.PopupControlBehavior",Sys.Extended.UI.DynamicPopulateBehaviorBase);Sys.registerComponent(Sys.Extended.UI.PopupControlBehavior,{name:"popupBehavior"});Sys.Extended.UI.PopupControlBehavior.__VisiblePopup=c;Sys.Extended.UI.PopupControlPopupPosition=function(){throw Error.invalidOperation();};Sys.Extended.UI.PopupControlPopupPosition.prototype={Center:0,Top:1,Left:2,Bottom:3,Right:4};Sys.Extended.UI.PopupControlPopupPosition.registerEnum("Sys.Extended.UI.PopupControlPopupPosition",d)}if(window.Sys&&Sys.loader)Sys.loader.registerScript(scriptName,["ExtendedDynamicPopulate","ExtendedPopup","ExtendedAnimationBehavior"],execute);else execute()})();